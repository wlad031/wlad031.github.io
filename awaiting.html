<html>

<head>

	<title>Кристина Цмокина и Влад Кусаковский</title>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-joda/1.11.0/js-joda.js"></script>

</head>

<body>

	<h1 style="text-align:center;">Влад Кусаковский и Кристина Цмокина</h1>
	<h2 id="hours"></h2>
	<h2 id="days"></h2>

	<div id="outer" style="min-width: 256px; height: 50px; border-style: solid; border-width: 3px; border-radius:10px;">
		<div id="inner" style="background: red; height: 50px">
			<img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/ea196117-0b64-49b7-b13f-79f43cf77e53/ddjidrq-967891d0-44fd-422e-a701-6218df1f0f37.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcL2VhMTk2MTE3LTBiNjQtNDliNy1iMTNmLTc5ZjQzY2Y3N2U1M1wvZGRqaWRycS05Njc4OTFkMC00NGZkLTQyMmUtYTcwMS02MjE4ZGYxZjBmMzcucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.VxikeAkuVdPHKKxH5CNZwr6oG_HVtyGF3XCvi-dXeuE" height="72" width="72" align="right" 
			style="transform: scaleX(-1); margin-top: -17px; margin-right: 45px">
		</div>
	</div>

</div>

<div style="min-width: 256px; height: 50px;">
	<img src="https://i.redd.it/d19cl2tyxq141.png" height="102" width="102" align="right" style="margin-top: -110px; margin-right: -30px">
	<h2 id="p"style="text-align: center;"></h2>
	<!-- <h2 id="p1"></h2> -->
	<h2 id="now"></h2>
	<h2 id="nowKr"></h2>
	<h2 style="text-align: center;">ЦМОК КУСЬ</h2>
</div>

<script>


var f = function() {

   	var from = JSJoda.ZonedDateTime.parse("2020-01-05T17:00:00.000+04:00")
	var to = JSJoda.ZonedDateTime.parse("2020-01-31T21:00:00.000+04:00")
	var now = JSJoda.ZonedDateTime.now(JSJoda.ZoneId.of("UTC+04:00"))
	var diff = JSJoda.Duration.between(from, to)
	// var hours = (to - now) / 1000 / 60 / 60
	// var days = hours / 24
	var p = JSJoda.Duration.between(from, now).toMillis() / diff.toMillis()
	var w = document.getElementById("outer").offsetWidth
	
	var new_w = Math.min(w, Math.round(w * p))
	document.getElementById("inner").setAttribute("style","background: red; height: 50px; width:"+new_w+"px");

	document.getElementById("p").textContent = Number((p * 100).toFixed(3)) + "%"
	// document.getElementById("p1").textContent = "Осталось в процентах, от того, что уже прошло: " + Number(((100 - (p * 100)) / (p * 100) * 100).toFixed(2)) + "%"
	document.getElementById("now").textContent = "Сейчас в Саратове: " + now.format(JSJoda.DateTimeFormatter.ofPattern('d/MM HH:mm'))
	document.getElementById("nowKr").textContent = "Сейчас в Кракове: " + JSJoda.ZonedDateTime.now(JSJoda.ZoneId.of("UTC+01:00")).format(JSJoda.DateTimeFormatter.ofPattern('d/MM HH:mm'))
	document.getElementById("hours").textContent = "Осталось до встречи: " + JSJoda.Duration.between(now, to).toString()
		.substring(2)
		.replace("H", " часов ")
		.replace("M", " минут ")
		.replace("S", " секунд")
	// document.getElementById("days").textContent ="Осталось дней: "+ Math.round(days)

}

f();

setInterval(f, 1000)

</script>

</body>	

</html>
